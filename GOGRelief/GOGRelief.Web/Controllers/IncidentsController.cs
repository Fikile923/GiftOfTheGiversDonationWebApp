using Microsoft.AspNetCore.Mvc; using GOGRelief.Data; using GOGRelief.Data.Models; using System.Threading.Tasks; namespace GOGRelief.Web.Controllers { public class IncidentsController : Controller { private readonly ApplicationDbContext _db; public IncidentsController(ApplicationDbContext db) { _db = db; } public IActionResult Create() => View(); [HttpPost] public async Task<IActionResult> Create(Incident model) { if (!ModelState.IsValid) return View(model); _db.Incidents.Add(model); await _db.SaveChangesAsync(); return RedirectToAction("Details", new { id = model.Id }); } public async Task<IActionResult> Details(int id) { var incident = await _db.Incidents.FindAsync(id); if (incident == null) return NotFound(); return View(incident); } } }